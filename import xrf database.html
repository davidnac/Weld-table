<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CSV to HTML Table</title>
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        border: 1px solid black;
        padding: 8px;
        text-align: center;
        min-width: 70px;
      }
      th {
        background-color: #f2f2f2;
      }
    </style>
  </head>
  <body>
    <input type="file" id="csvFileInput" accept=".csv" />
    <div id="tableContainer"></div>

    <script>
        document
    .getElementById("csvFileInput")
    .addEventListener("change", function (event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function (e) {
        const csvText = e.target.result;
        document.getElementById("tableContainer").innerHTML =
          csvToHtmlTable(csvText);
      };
      reader.readAsText(file);
    });



    function csvToHtmlTable(csvText) {
      

        const rows = csvText
          .trim()
          .split("\n")
          .map((row) => row.split(",")); // Split by commas

        if (rows.length < 2) return "No valid data found";

        let html = "<table><thead><tr>";

        // Generate header row, merging columns
        let headers = rows[0].map(header => header.replace(/-/g, "")); // Remove '-' from headers
        html += `<th>${headers[0]}</th><th>${headers[1]}</th>`;
        for (let j = 2; j < headers.length - 1; j += 2) {
          html += `<th>${headers[j]}-${headers[j + 1]}</th>`;
        }
        html += "</tr><tr>"; // Add another row for filters

        // Add filter inputs
        html += `<th class="maxWide">
                    <input type="text" id="materialSearch" placeholder="Search material...">
                </th>`;
        for (let j = 1; j < headers.length - 1; j++) {
          html += `<th>
                      <input type="text" class="filter" oninput="validateInput(this)">
                      <span class="error-message"></span>
                  </th>`;
        }
        html += "</tr></thead><tbody>";

        // Process data rows, merging columns
        for (let i = 1; i < rows.length; i++) {
          let row = rows[i];
          html += `<tr><td>${row[0]}</td><td>${row[1]}</td>`;
          for (let j = 2; j < row.length - 1; j += 2) {
            // Format numbers with 2 decimal places
            let value1 = parseFloat(row[j]);
            let value2 = parseFloat(row[j + 1]);
            html += `<td>${isNaN(value1) ? row[j] : value1.toFixed(2)} - ${isNaN(value2) ? row[j + 1] : value2.toFixed(2)}</td>`;
          }
          html += "</tr>";
        }

        html += "</tbody></table>";

        // Post-process headers to include element names
        let parser = new DOMParser();
        let doc = parser.parseFromString(html, "text/html");
        let thElements = doc.querySelectorAll("thead th");

        for (let i = 1; i < thElements.length; i++) { // Skip the first column
            let th = thElements[i];
            let originalText = th.textContent.trim();
            let element = elements.find(el => originalText.includes(el.symbol));
            if (element) {
                th.innerHTML = `${element.name} (${originalText}) % <span class="sort-icon">â‡…</span>`;
                th.setAttribute("onclick", "sortTable(this)");
            }
        }

        return doc.body.innerHTML;
    }


      const elements = [
        { symbol: "H", name: "Hydrogen", row: 1, col: 1, wt: 100 },
        { symbol: "He", name: "Helium", row: 1, col: 18, wt: 100 },

        { symbol: "Li", name: "Lithium", row: 2, col: 1, wt: 100, Ka: 0.054 },
        { symbol: "Be", name: "Beryllium", row: 2, col: 2, wt: 100, Ka: 0.108 },
        { symbol: "B", name: "Boron", row: 2, col: 13, wt: 100, Ka: 0.183 },
        { symbol: "C", name: "Carbon", row: 2, col: 14, wt: 100, Ka: 0.277 },
        { symbol: "N", name: "Nitrogen", row: 2, col: 15, wt: 100, Ka: 0.392 },
        { symbol: "O", name: "Oxygen", row: 2, col: 16, wt: 100, Ka: 0.525 },
        { symbol: "F", name: "Fluorine", row: 2, col: 17, wt: 100, Ka: 0.677 },
        { symbol: "Ne", name: "Neon", row: 2, col: 18, wt: 100, Ka: 0.849 },

        { symbol: "Na", name: "Sodium", row: 3, col: 1, wt: 100, Ka: 1.041 },
        { symbol: "Mg", name: "Magnesium", row: 3, col: 2, wt: 100, Ka: 1.254 },
        { symbol: "Al", name: "Aluminum", row: 3, col: 13, wt: 100, Ka: 1.486 },
        { symbol: "Si", name: "Silicon", row: 3, col: 14, wt: 100, Ka: 1.74 },
        {
          symbol: "P",
          name: "Phosphorus",
          row: 3,
          col: 15,
          wt: 100,
          Ka: 2.013,
        },
        { symbol: "S", name: "Sulfur", row: 3, col: 16, wt: 100, Ka: 2.307 },
        { symbol: "Cl", name: "Chlorine", row: 3, col: 17, wt: 100, Ka: 2.622 },
        { symbol: "Ar", name: "Argon", row: 3, col: 18, wt: 100, Ka: 2.957 },

        { symbol: "K", name: "Potassium", row: 4, col: 1, wt: 100, Ka: 3.314 },
        { symbol: "Ca", name: "Calcium", row: 4, col: 2, wt: 100, Ka: 3.692 },
        { symbol: "Sc", name: "Scandium", row: 4, col: 3, wt: 100, Ka: 4.09 },
        { symbol: "Ti", name: "Titanium", row: 4, col: 4, wt: 100, Ka: 4.51 },
        { symbol: "V", name: "Vanadium", row: 4, col: 5, wt: 100, Ka: 4.949 },
        { symbol: "Cr", name: "Chromium", row: 4, col: 6, wt: 100, Ka: 5.415 },
        { symbol: "Mn", name: "Manganese", row: 4, col: 7, wt: 100, Ka: 5.898 },
        { symbol: "Fe", name: "Iron", row: 4, col: 8, wt: 100, Ka: 6.404 },
        { symbol: "Co", name: "Cobalt", row: 4, col: 9, wt: 100, Ka: 6.925 },
        { symbol: "Ni", name: "Nickel", row: 4, col: 10, wt: 100, Ka: 7.472 },
        {
          symbol: "Cu",
          name: "Copper",
          row: 4,
          col: 11,
          wt: 100,
          Ka: 8.047,
          La: 0.93,
        },
        {
          symbol: "Zn",
          name: "Zinc",
          row: 4,
          col: 12,
          wt: 100,
          Ka: 8.638,
          La: 1.012,
        },
        {
          symbol: "Ga",
          name: "Gallium",
          row: 4,
          col: 13,
          wt: 100,
          Ka: 9.251,
          La: 1.098,
        },
        {
          symbol: "Ge",
          name: "Germanium",
          row: 4,
          col: 14,
          wt: 100,
          Ka: 9.875,
          La: 1.188,
        },
        {
          symbol: "As",
          name: "Arsenic",
          row: 4,
          col: 15,
          wt: 100,
          Ka: 10.543,
          La: 1.282,
        },
        {
          symbol: "Se",
          name: "Selenium",
          row: 4,
          col: 16,
          wt: 100,
          Ka: 11.222,
          La: 1.379,
        },
        {
          symbol: "Br",
          name: "Bromine",
          row: 4,
          col: 17,
          wt: 100,
          Ka: 11.924,
          La: 1.48,
        },
        {
          symbol: "Kr",
          name: "Krypton",
          row: 4,
          col: 18,
          wt: 100,
          Ka: 12.648,
          La: 1.584,
        },

        {
          symbol: "Rb",
          name: "Rubidium",
          row: 5,
          col: 1,
          wt: 100,
          Ka: 13.394,
          La: 1.692,
        },
        {
          symbol: "Sr",
          name: "Strontium",
          row: 5,
          col: 2,
          wt: 100,
          Ka: 14.165,
          La: 1.804,
        },
        {
          symbol: "Y",
          name: "Yttrium",
          row: 5,
          col: 3,
          wt: 100,
          Ka: 14.959,
          La: 1.918,
        },
        {
          symbol: "Zr",
          name: "Zirconium",
          row: 5,
          col: 4,
          wt: 100,
          Ka: 15.775,
          La: 2.036,
        },
        {
          symbol: "Nb",
          name: "Niobium",
          row: 5,
          col: 5,
          wt: 100,
          Ka: 16.615,
          La: 2.157,
        },
        {
          symbol: "Mo",
          name: "Molybdenum",
          row: 5,
          col: 6,
          wt: 100,
          Ka: 17.479,
          La: 2.282,
        },
        {
          symbol: "Tc",
          name: "Technetium",
          row: 5,
          col: 7,
          wt: 100,
          Ka: 18.367,
          La: 2.41,
        },
        {
          symbol: "Ru",
          name: "Ruthenium",
          row: 5,
          col: 8,
          wt: 100,
          Ka: 19.279,
          La: 2.541,
        },
        {
          symbol: "Rh",
          name: "Rhodium",
          row: 5,
          col: 9,
          wt: 100,
          Ka: 20.216,
          La: 2.676,
        },
        {
          symbol: "Pd",
          name: "Palladium",
          row: 5,
          col: 10,
          wt: 100,
          Ka: 21.177,
          La: 2.814,
        },
        {
          symbol: "Ag",
          name: "Silver",
          row: 5,
          col: 11,
          wt: 100,
          Ka: 22.163,
          La: 2.956,
        },
        {
          symbol: "Cd",
          name: "Cadmium",
          row: 5,
          col: 12,
          wt: 100,
          Ka: 23.173,
          La: 3.101,
        },
        {
          symbol: "In",
          name: "Indium",
          row: 5,
          col: 13,
          wt: 100,
          Ka: 24.208,
          La: 3.25,
        },
        {
          symbol: "Sn",
          name: "Tin",
          row: 5,
          col: 14,
          wt: 100,
          Ka: 25.271,
          La: 3.402,
        },
        {
          symbol: "Sb",
          name: "Antimony",
          row: 5,
          col: 15,
          wt: 100,
          Ka: 26.36,
          La: 3.559,
        },
        {
          symbol: "Te",
          name: "Tellurium",
          row: 5,
          col: 16,
          wt: 100,
          Ka: 27.476,
          La: 3.719,
        },
        {
          symbol: "I",
          name: "Iodine",
          row: 5,
          col: 17,
          wt: 100,
          Ka: 28.62,
          La: 3.882,
        },
        {
          symbol: "Xe",
          name: "Xenon",
          row: 5,
          col: 18,
          wt: 100,
          Ka: 29.791,
          La: 4.048,
        },

        {
          symbol: "Cs",
          name: "Cesium",
          row: 6,
          col: 1,
          wt: 100,
          Ka: 30.989,
          La: 4.218,
        },
        {
          symbol: "Ba",
          name: "Barium",
          row: 6,
          col: 2,
          wt: 100,
          Ka: 32.214,
          La: 4.391,
        },
        {
          symbol: "La",
          name: "Lanthanum",
          row: 6,
          col: 3,
          wt: 100,
          Ka: 33.467,
          La: 4.567,
          Lb: 4.95,
        },
        {
          symbol: "Hf",
          name: "Hafnium",
          row: 6,
          col: 4,
          wt: 100,
          Ka: 65.11,
          La: 7.89,
          Lb: 9.03,
        },
        {
          symbol: "Ta",
          name: "Tantalum",
          row: 6,
          col: 5,
          wt: 100,
          Ka: 67.08,
          La: 8.15,
          Lb: 9.35,
        },
        {
          symbol: "W",
          name: "Tungsten",
          row: 6,
          col: 6,
          wt: 100,
          Ka: 69.06,
          La: 8.4,
          Lb: 9.67,
        },
        {
          symbol: "Re",
          name: "Rhenium",
          row: 6,
          col: 7,
          wt: 100,
          Ka: 71.08,
          La: 8.66,
          Lb: 10.0,
        },
        {
          symbol: "Os",
          name: "Osmium",
          row: 6,
          col: 8,
          wt: 100,
          Ka: 73.12,
          La: 8.93,
          Lb: 10.33,
        },
        {
          symbol: "Ir",
          name: "Iridium",
          row: 6,
          col: 9,
          wt: 100,
          Ka: 75.18,
          La: 9.2,
          Lb: 10.67,
        },
        {
          symbol: "Pt",
          name: "Platinum",
          row: 6,
          col: 10,
          wt: 100,
          Ka: 77.25,
          La: 9.47,
          Lb: 11.01,
        },
        {
          symbol: "Au",
          name: "Gold",
          row: 6,
          col: 11,
          wt: 100,
          Ka: 79.33,
          La: 9.71,
          Lb: 11.36,
        },
        {
          symbol: "Hg",
          name: "Mercury",
          row: 6,
          col: 12,
          wt: 100,
          Ka: 81.43,
          La: 9.99,
          Lb: 11.72,
        },
        {
          symbol: "Tl",
          name: "Thallium",
          row: 6,
          col: 13,
          wt: 100,
          Ka: 83.54,
          La: 10.26,
          Lb: 12.08,
        },
        {
          symbol: "Pb",
          name: "Lead",
          row: 6,
          col: 14,
          wt: 100,
          Ka: 85.67,
          La: 10.55,
          Lb: 12.45,
        },
        {
          symbol: "Bi",
          name: "Bismuth",
          row: 6,
          col: 15,
          wt: 100,
          Ka: 87.82,
          La: 10.84,
          Lb: 12.82,
        },
        {
          symbol: "Po",
          name: "Polonium",
          row: 6,
          col: 16,
          wt: 100,
          Ka: 90.0,
          La: 11.13,
          Lb: 13.2,
        },
        {
          symbol: "At",
          name: "Astatine",
          row: 6,
          col: 17,
          wt: 100,
          Ka: 92.2,
          La: 11.43,
          Lb: 13.59,
        },
        {
          symbol: "Rn",
          name: "Radon",
          row: 6,
          col: 18,
          wt: 100,
          Ka: 94.42,
          La: 11.74,
          Lb: 13.98,
        },

        {
          symbol: "Ce",
          name: "Cerium",
          row: 8,
          col: 4,
          wt: 100,
          Ka: 34.72,
          La: 4.84,
          Lb: 5.27,
        },
        {
          symbol: "Pr",
          name: "Praseodymium",
          row: 8,
          col: 5,
          wt: 100,
          Ka: 35.99,
          La: 5.01,
          Lb: 5.46,
        },
        {
          symbol: "Nd",
          name: "Neodymium",
          row: 8,
          col: 6,
          wt: 100,
          Ka: 37.28,
          La: 5.19,
          Lb: 5.66,
        },
        {
          symbol: "Pm",
          name: "Promethium",
          row: 8,
          col: 7,
          wt: 100,
          Ka: 38.59,
          La: 5.37,
          Lb: 5.86,
        },
        {
          symbol: "Sm",
          name: "Samarium",
          row: 8,
          col: 8,
          wt: 100,
          Ka: 39.92,
          La: 5.55,
          Lb: 6.06,
        },
        {
          symbol: "Eu",
          name: "Europium",
          row: 8,
          col: 9,
          wt: 100,
          Ka: 41.27,
          La: 5.74,
          Lb: 6.27,
        },
        {
          symbol: "Gd",
          name: "Gadolinium",
          row: 8,
          col: 10,
          wt: 100,
          Ka: 42.64,
          La: 5.93,
          Lb: 6.48,
        },
        {
          symbol: "Tb",
          name: "Terbium",
          row: 8,
          col: 11,
          wt: 100,
          Ka: 44.03,
          La: 6.12,
          Lb: 6.69,
        },
        {
          symbol: "Dy",
          name: "Dysprosium",
          row: 8,
          col: 12,
          wt: 100,
          Ka: 45.44,
          La: 6.32,
          Lb: 6.91,
        },
        {
          symbol: "Ho",
          name: "Holmium",
          row: 8,
          col: 13,
          wt: 100,
          Ka: 46.87,
          La: 6.52,
          Lb: 7.13,
        },
        {
          symbol: "Er",
          name: "Erbium",
          row: 8,
          col: 14,
          wt: 100,
          Ka: 48.32,
          La: 6.72,
          Lb: 7.36,
        },
        {
          symbol: "Tm",
          name: "Thulium",
          row: 8,
          col: 15,
          wt: 100,
          Ka: 49.79,
          La: 6.93,
          Lb: 7.59,
        },
        {
          symbol: "Tm",
          name: "Thulium",
          row: 8,
          col: 15,
          wt: 100,
          Ka: 49.79,
          La: 6.93,
          Lb: 7.59,
        },
        {
          symbol: "Yb",
          name: "Ytterbium",
          row: 8,
          col: 16,
          wt: 100,
          Ka: 51.28,
          La: 7.14,
          Lb: 7.82,
        },
        {
          symbol: "Lu",
          name: "Lutetium",
          row: 8,
          col: 17,
          wt: 100,
          Ka: 52.79,
          La: 7.35,
          Lb: 8.05,
        },

        {
          symbol: "Th",
          name: "Thorium",
          row: 9,
          col: 4,
          wt: 100,
          Ka: 98.44,
          La: 12.37,
          Lb: 14.78,
          Ma: 2.01,
        },
        {
          symbol: "Pa",
          name: "Protactinium",
          row: 9,
          col: 5,
          wt: 100,
          Ka: 100.86,
          La: 12.69,
          Lb: 15.19,
          Ma: 2.09,
        },
        {
          symbol: "U",
          name: "Uranium",
          row: 9,
          col: 6,
          wt: 100,
          Ka: 103.35,
          La: 13.02,
          Lb: 15.6,
          Ma: 2.17,
        },
        {
          symbol: "Np",
          name: "Neptunium",
          row: 9,
          col: 7,
          wt: 100,
          Ka: 105.89,
          La: 13.35,
          Lb: 16.01,
          Ma: 2.25,
        },
        {
          symbol: "Pu",
          name: "Plutonium",
          row: 9,
          col: 8,
          wt: 100,
          Ka: 108.47,
          La: 13.68,
          Lb: 16.43,
          Ma: 2.33,
        },
        {
          symbol: "Am",
          name: "Americium",
          row: 9,
          col: 9,
          wt: 100,
          Ka: 111.1,
          La: 14.02,
          Lb: 16.85,
          Ma: 2.41,
        },
        {
          symbol: "Cm",
          name: "Curium",
          row: 9,
          col: 10,
          wt: 100,
          Ka: 113.78,
          La: 14.36,
          Lb: 17.28,
          Ma: 2.49,
        },
        {
          symbol: "Bk",
          name: "Berkelium",
          row: 9,
          col: 11,
          wt: 100,
          Ka: 116.51,
          La: 14.71,
          Lb: 17.71,
          Ma: 2.57,
        },
        {
          symbol: "Cf",
          name: "Californium",
          row: 9,
          col: 12,
          wt: 100,
          Ka: 119.28,
          La: 15.06,
          Lb: 18.15,
          Ma: 2.66,
        },
        {
          symbol: "Es",
          name: "Einsteinium",
          row: 9,
          col: 13,
          wt: 100,
          Ka: 122.1,
          La: 15.41,
          Lb: 18.59,
          Ma: 2.74,
        },
        {
          symbol: "Fm",
          name: "Fermium",
          row: 9,
          col: 14,
          wt: 100,
          Ka: 124.97,
          La: 15.77,
          Lb: 19.03,
          Ma: 2.83,
        },
        {
          symbol: "Md",
          name: "Mendelevium",
          row: 9,
          col: 15,
          wt: 100,
          Ka: 127.89,
          La: 16.13,
          Lb: 19.48,
          Ma: 2.91,
        },
        {
          symbol: "No",
          name: "Nobelium",
          row: 9,
          col: 16,
          wt: 100,
          Ka: 130.86,
          La: 16.5,
          Lb: 19.93,
          Ma: 3.0,
        },
        {
          symbol: "Lr",
          name: "Lawrencium",
          row: 9,
          col: 17,
          wt: 100,
          Ka: 133.88,
          La: 16.87,
          Lb: 20.39,
          Ma: 3.09,
        },
      ];

      const selectedElements = new Set([
        "Ag",
        "Ni",
        "Co",
        "Ti",
        "V",
        "Cr",
        "Nb",
        "Mo",
        "Al",
        "Zn",
        "Cu",
        "Fe",
        "Mn",
        "W",
      ]);

    </script>
  </body>
</html>
